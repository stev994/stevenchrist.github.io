<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stev Coffee's - Transactions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --coffee-dark: #4B3832;
            --coffee-medium: #6F4E37;
            --coffee-light: #C4A484;
            --coffee-cream: #E6D5B8;
            --coffee-accent: #A67B5B;
        }
        body {
            background-color: #F9F5F0;
            color: var(--coffee-dark);
        }
        .navbar {
            background-color: var(--coffee-dark) !important;
        }
        .card {
            background-color: var(--coffee-cream);
            border-color: var(--coffee-medium);
            box-shadow: 0 4px 8px rgba(75, 56, 50, 0.1);
        }
        .card-header {
            background-color: var(--coffee-accent);
            color: white;
        }
        .btn-primary {
            background-color: var(--coffee-accent);
            border-color: var(--coffee-medium);
        }
        .btn-primary:hover {
            background-color: var(--coffee-medium);
            border-color: var(--coffee-dark);
        }
        footer {
            background-color: var(--coffee-dark);
            color: var(--coffee-cream);
        }
        .nav-link.active {
            color: var(--coffee-light) !important;
            font-weight: bold;
        }
        .price-input {
            max-width: 120px;
        }
        .table {
            background-color: white;
        }
        .table th {
            background-color: var(--coffee-medium);
            color: white;
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: rgba(233, 221, 199, 0.5);
        }
        .btn-outline-danger {
            color: #dc3545;
            border-color: #dc3545;
        }
        .btn-outline-danger:hover {
            background-color: #dc3545;
        }
        .coffee-price-badge {
            background-color: var(--coffee-light);
            color: var(--coffee-dark);
        }
        .footer-coffee {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="%23A67B5B" opacity="0.3"><path d="M30,30 Q50,5 70,30 Q90,55 70,80 Q50,95 30,80 Q10,55 30,30" /></svg>');
            background-repeat: repeat;
            background-size: 50px 50px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-cup-hot-fill me-2"></i>
                Stev Coffee's
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="profile.html">Profile</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="transactions.html">Transactions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mt-4">
        <div class="card mb-4">
            <div class="card-header">
                <h2><i class="bi bi-receipt me-2"></i>Transaction Management</h2>
            </div>
            <div class="card-body">
                <div class="alert alert-secondary" style="background-color: var(--coffee-cream);">
                    <i class="bi bi-info-circle"></i> Track all your coffee purchases and transactions
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Type</th>
                                <th>Size</th>
                                <th>Qty</th>
                                <th>Price</th>
                                <th>Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transaction-body">
                            <!-- Sample data will be loaded here -->
                            <tr>
                                <td>1</td>
                                <td>Espresso</td>
                                <td>Regular</td>
                                <td>2</td>
                                <td>$3.50</td>
                                <td>$7.00</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteRow(this)">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Latte</td>
                                <td>Grande</td>
                                <td>1</td>
                                <td>$4.75</td>
                                <td>$4.75</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteRow(this)">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="5" class="text-end"><strong>Total:</strong></td>
                                <td><strong>$11.75</strong></td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <h4 class="mt-4"><i class="bi bi-plus-circle me-2"></i>Add New Transaction</h4>
                <form id="transaction-form" class="row g-3 needs-validation" novalidate>
                    <div class="col-md-3">
                        <label for="coffee-type" class="form-label">Coffee Type</label>
                        <select class="form-select" id="coffee-type" required>
                            <option value="">Choose...</option>
                            <option>Espresso</option>
                            <option>Latte</option>
                            <option>Cappuccino</option>
                            <option>Americano</option>
                            <option>Mocha</option>
                            <option>Macchiato</option>
                            <option>Flat White</option>
                        </select>
                        <div class="invalid-feedback">
                            Please select a coffee type.
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label for="size" class="form-label">Size</label>
                        <select class="form-select" id="size">
                            <option>Regular</option>
                            <option>Grande</option>
                            <option>Venti</option>
                        </select>
                    </div>
                    <div class="col-md-1">
                        <label for="quantity" class="form-label">Qty</label>
                        <input type="number" class="form-control" id="quantity" min="1" value="1" required>
                        <div class="invalid-feedback">
                            Please enter a valid quantity.
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label for="price" class="form-label">Price</label>
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input type="number" class="form-control price-input" id="price" min="0" step="0.01" value="3.50" required>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label for="total" class="form-label">Total</label>
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input type="text" class="form-control price-input" id="total" value="3.50" readonly>
                        </div>
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="bi bi-plus-lg me-1"></i> Add
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer mt-auto py-3 footer-coffee">
        <div class="container text-center">
            <div class="mb-2">
                <span class="badge coffee-price-badge me-1">Espresso $3.50</span>
                <span class="badge coffee-price-badge me-1">Latte $4.75</span>
                <span class="badge coffee-price-badge">Cappuccino $4.50</span>
            </div>
            <span>© 2023 Stev Coffee's - Coffee Transaction System</span>
            <div class="mt-2">
                <a href="#" class="text-light me-2"><i class="bi bi-facebook"></i></a>
                <a href="#" class="text-light me-2"><i class="bi bi-twitter"></i></a>
                <a href="#" class="text-light"><i class="bi bi-github"></i></a>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Enhanced transaction functionality with more coffee options
        document.addEventListener('DOMContentLoaded', function() {
            // Coffee price mapping
            const coffeePrices = {
                'Espresso': 3.50,
                'Latte': 4.75,
                'Cappuccino': 4.50,
                'Americano': 3.75,
                'Mocha': 5.25,
                'Macchiato': 4.25,
                'Flat White': 4.50
            };

            // Size price adjustments
            const sizeAdjustments = {
                'Regular': 0,
                'Grande': 0.75,
                'Venti': 1.50
            };

            // Auto-set price when coffee type changes
            document.getElementById('coffee-type').addEventListener('change', function() {
                const coffeeType = this.value;
                if (coffeeType && coffeePrices[coffeeType]) {
                    const size = document.getElementById('size').value;
                    const adjustment = sizeAdjustments[size] || 0;
                    document.getElementById('price').value = (coffeePrices[coffeeType] + adjustment).toFixed(2);
                    calculateTotal();
                }
            });

            // Auto-adjust price when size changes
            document.getElementById('size').addEventListener('change', function() {
                const coffeeType = document.getElementById('coffee-type').value;
                if (coffeeType && coffeePrices[coffeeType]) {
                    const adjustment = sizeAdjustments[this.value] || 0;
                    document.getElementById('price').value = (coffeePrices[coffeeType] + adjustment).toFixed(2);
                    calculateTotal();
                }
            });

            // Calculate total price
            document.getElementById('quantity').addEventListener('input', calculateTotal);
            document.getElementById('price').addEventListener('input', calculateTotal);

            function calculateTotal() {
                const quantity = parseFloat(document.getElementById('quantity').value) || 0;
                const price = parseFloat(document.getElementById('price').value) || 0;
                const total = quantity * price;
                document.getElementById('total').value = total.toFixed(2);
            }

            // Form validation and submission
            const form = document.getElementById('transaction-form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!form.checkValidity()) {
                    e.stopPropagation();
                    form.classList.add('was-validated');
                    return;
                }

                addTransaction();
                form.classList.remove('was-validated');
                form.reset();
                
                // Reset to default price
                const coffeeType = document.getElementById('coffee-type').value;
                if (coffeeType && coffeePrices[coffeeType]) {
                    document.getElementById('price').value = coffeePrices[coffeeType].toFixed(2);
                }
                calculateTotal();
            });

            function addTransaction() {
                const coffeeType = document.getElementById('coffee-type').value;
                const size = document.getElementById('size').value;
                const quantity = document.getElementById('quantity').value;
                const price = document.getElementById('price').value;
                const total = document.getElementById('total').value;

                const tableBody = document.getElementById('transaction-body');
                const newRow = tableBody.insertRow();
                newRow.innerHTML = `
                    <td>${tableBody.rows.length + 1}</td>
                    <td>${coffeeType}</td>
                    <td>${size}</td>
                    <td>${quantity}</td>
                    <td>$${parseFloat(price).toFixed(2)}</td>
                    <td>$${total}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteRow(this)">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>
                `;

                updateGrandTotal();
            }

            function updateGrandTotal() {
                let grandTotal = 0;
                const rows = document.getElementById('transaction-body').rows;
                
                for (let i = 0; i < rows.length; i++) {
                    const totalCell = rows[i].cells[5];
                    const totalValue = parseFloat(totalCell.textContent.replace('$', ''));
                    grandTotal += totalValue;
                }
                
                document.querySelector('tfoot td:nth-child(2)').innerHTML = `<strong>$${grandTotal.toFixed(2)}</strong>`;
            }

            // Initialize with first calculation
            calculateTotal();
        });

        // Delete row function (global)
        function deleteRow(btn) {
            const row = btn.closest('tr');
            row.remove();
            
            // Update IDs of remaining rows
            const rows = document.getElementById('transaction-body').rows;
            for (let i = 0; i < rows.length; i++) {
                rows[i].cells[0].textContent = i + 1;
            }
            
            // Update grand total
            let grandTotal = 0;
            for (let i = 0; i < rows.length; i++) {
                const totalCell = rows[i].cells[5];
                const totalValue = parseFloat(totalCell.textContent.replace('$', ''));
                grandTotal += totalValue;
            }
            
            document.querySelector('tfoot td:nth-child(2)').innerHTML = `<strong>$${grandTotal.toFixed(2)}</strong>`;
        }
    </script>
</body>
</html>
